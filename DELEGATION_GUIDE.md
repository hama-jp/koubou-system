# 📋 工房システム 職人委託判断ガイド

## 🎯 5秒で判断！委託フローチャート

```
タスクが来た！
    ↓
【量で判断】
├─ 1-3件 → 親方がやる（15分以内なら）
├─ 4-9件 → 内容次第（下記チェック）
└─ 10件以上 → 職人に投げる！

【内容で判断】
├─ 定型作業 → 職人へGO！
├─ 創造的作業 → 親方がやる
└─ デバッグ → 親方がやる
└─ 翻訳・文書 → 職人へGO！
└─ テスト作成 → 職人へGO！
```

## 📊 実績データ（実測値）

| 指標 | 数値 | 意味 |
|------|------|------|
| 処理速度 | 3.2件/分 | 1時間で約190件処理可能 |
| 成功率 | 100% | 71件連続成功の実績 |
| 並行効果 | 1.6倍 | 2ワーカーで効率1.6倍 |
| 平均処理時間 | 15-30秒 | 通常タスクの処理時間 |

## ✅ 即座に委託すべきケース

```bash
# こんな時はすぐ委託！
□ 同じような作業が5件以上
□ 翻訳作業（日英・英日）
□ テストコード生成
□ ドキュメント作成
□ 定型的なリファクタリング
□ CSVやJSONの整形・変換
□ 夜間・週末の作業
```

## ❌ 親方がやるべきケース

```bash
# これは親方の仕事！
□ アーキテクチャ設計
□ エラー原因調査・デバッグ
□ 外部API連携の初回実装
□ セキュリティ関連
□ お客様への最終納品物
□ 新技術の調査・評価
```

## 🔍 委託前の30秒チェック

### 1. ダッシュボード確認
```bash
# ブラウザで開く
http://localhost:8080

# 見るべきポイント
- Worker Status: idle なら即GO！
- Task Queue: 空いてるなら投げる！
```

### 2. コマンドで確認
```bash
# ワーカー状態（1秒で分かる）
curl -s http://localhost:8768/api/workers/status | jq '.workers[] | .status'

# 結果が "idle" なら委託OK！
```

## 📝 委託の実例

### 良い委託例 ✅
```bash
# 明確な指示で成功率UP
curl -X POST http://localhost:8765/task/delegate \
  -H "Content-Type: application/json" \
  -d '{
    "prompt": "UserクラスにバリデーションメソッドのテストをPytestで10個作成。emailとpasswordの境界値テストを含める。",
    "priority": 8,
    "sync": false
  }'
```

### 悪い委託例 ❌
```bash
# 曖昧すぎる
"何かいいテスト作って"

# 創造的すぎる
"革新的なアーキテクチャを設計して"

# デバッグ系
"なぜか動かないから原因調べて"
```

## 🚀 効率化のコツ

### バッチ処理で時間節約
```python
# 10個のファイルを一気に翻訳
files = ["README.md", "INSTALL.md", ...]
for file in files:
    delegate_task(f"Translate {file} to English")
```

### 優先度を使い分ける（更新版）
- **9-10**: 緊急 → **local_001専用**（高速処理）
- **5-8**: 通常 → **local_001優先**（品質重視）
- **3-4**: 中低優先 → local_001（リモートは補完）
- **1-2**: 最低優先 → remote_lan_001（時間に余裕があるもののみ）

### 夜間バッチの活用
```bash
# 夜に大量タスクを投入
# 朝には完成している！
for i in {1..100}; do
  curl -X POST ... -d "{\"priority\": 3, ...}"
done
```

## 📈 効果測定

### 週次チェック項目
```bash
# 処理済みタスク数
sqlite3 .koubou/db/koubou.db \
  "SELECT COUNT(*) FROM task_master WHERE status='completed' 
   AND datetime('now', '-7 days') < updated_at;"

# 成功率確認
sqlite3 .koubou/db/koubou.db \
  "SELECT worker_id, 
   ROUND(tasks_completed * 100.0 / (tasks_completed + tasks_failed), 1) as rate
   FROM workers;"
```

## 💡 判断に迷ったら？

### 3つの質問で決める
1. **15分以内で終わる？** → Yes なら親方
2. **同じ作業が3つ以上？** → Yes なら職人
3. **創造性が必要？** → Yes なら親方

### それでも迷ったら
```bash
# まず1件だけテスト委託
# 品質OKなら残りも委託
# ダメなら親方がやる
```

## ⚠️ リモートワーカー（remote_lan_001）運用注意事項

### 性能の現実
- **実行速度**: ローカルワーカーの1/3-1/5程度
- **適用範囲**: 限定的（時間に余裕がある作業のみ）
- **ネットワーク**: LAN経由での遅延あり

### 適用すべきタスク ✅
```bash
# リモートワーカーが活躍できる場面
□ 翻訳作業（日英・英日）
□ 単純なドキュメント生成
□ 軽量なコード整形
□ 夜間の低優先度バッチ処理
□ 緊急時のバックアップ（ローカル過負荷時）
```

### 避けるべきタスク ❌
```bash
# リモートワーカーに投げてはいけないもの
□ 複雑なコード生成（3分以上かかる）
□ 大容量ファイル処理
□ 緊急性のある作業
□ クリティカルなお客様向け作業
```

### 実用的な委託戦略（2025年9月更新）
1. **メインはlocal_001** - 95%以上のタスクを処理（デフォルト構成）
2. **リモートは特殊用途** - デフォルト無効、必要時のみ手動有効化
3. **並行処理活用** - 5-10件のタスクを一気に委託してローカルで順次処理
4. **親方の時間創出** - 職人が働く間に創造的作業に集中

**性能データ（実測）**:
- ローカル職人: 平均30秒/件、並行処理で3件/分
- リモート職人: 平均233秒/件（約8倍遅い）
- **推奨**: ローカル単体運用が最適

## 🎯 最終的な判断基準

**職人の得意分野を活かし、親方は創造的作業に集中！**

- **ローカル職人** = 高速・高品質な主力部隊
- **リモート職人** = 補完・夜間バッチ担当
- **親方** = 設計者・品質管理者

この現実的な役割分担で、安定した生産性向上を実現します。

---
**忘れずに**: 委託後も品質チェックは親方の責任です！